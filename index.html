<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TestSarthi - Daily Test</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div id="app-container">
    <!-- Loading Screen -->
    <div id="loading-screen" class="screen active">
        <div class="loader"></div>
        <p>Loading Test...</p>
    </div>

    <!-- Test Info Screen -->
    <div id="info-screen" class="screen">
        <div class="container">
            <h1>üìù Daily Test</h1>
            <div class="test-info-card">
                <h2 id="test-date">25 January 2025</h2>
                <div class="info-grid">
                    <div class="info-item">
                        <span class="icon">üìã</span>
                        <span class="label">Questions</span>
                        <span class="value" id="total-questions">20</span>
                    </div>
                    <div class="info-item">
                        <span class="icon">üìä</span>
                        <span class="label">Total Marks</span>
                        <span class="value" id="total-marks">80</span>
                    </div>
                    <div class="info-item">
                        <span class="icon">‚è±Ô∏è</span>
                        <span class="label">Duration</span>
                        <span class="value" id="duration">60 min</span>
                    </div>
                </div>
                
                <div class="rules">
                    <h3>üìå Instructions:</h3>
                    <ul>
                        <li>‚úÖ Each correct answer: <strong>+4 marks</strong></li>
                        <li>‚ùå Each wrong answer: <strong>-1 mark</strong></li>
                        <li>‚è≠Ô∏è Unattempted: <strong>0 marks</strong></li>
                        <li>‚è±Ô∏è Timer will start when you begin</li>
                        <li>üì± You can navigate between questions</li>
                        <li>‚úçÔ∏è Review before final submit</li>
                    </ul>
                </div>

                <button class="btn btn-primary btn-large" onclick="startTest()">
                    üöÄ Start Test
                </button>
            </div>
        </div>
    </div>

    <!-- Test Screen -->
    <div id="test-screen" class="screen">
        <!-- Header -->
        <div class="test-header">
            <div class="header-left">
                <span class="question-counter">
                    Q <span id="current-question">1</span>/<span id="total-q">20</span>
                </span>
            </div>
            <div class="header-center">
                <div class="timer" id="timer">
                    <span class="timer-icon">‚è±Ô∏è</span>
                    <span id="timer-display">60:00</span>
                </div>
            </div>
            <div class="header-right">
                <button class="btn-icon" onclick="showReview()" title="Review">
                    üìã
                </button>
            </div>
        </div>

        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
            <span class="progress-text" id="progress-text">0/20 Answered</span>
        </div>

        <!-- Question Card -->
        <div class="question-container">
            <div class="question-card">
                <div class="question-meta">
                    <span class="subject-tag" id="subject-tag">Physics</span>
                    <span class="marks-tag">4 marks</span>
                </div>
                
                <div class="question-text" id="question-text">
                    Loading question...
                </div>

                <div class="options-container" id="options-container">
                    <!-- Options will be inserted here -->
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="navigation">
            <button class="btn btn-secondary" onclick="previousQuestion()" id="prev-btn">
                ‚Üê Previous
            </button>
            <button class="btn btn-outline" onclick="skipQuestion()">
                Skip
            </button>
            <button class="btn btn-secondary" onclick="nextQuestion()" id="next-btn">
                Next ‚Üí
            </button>
        </div>

        <!-- Question Grid Toggle -->
        <div class="grid-toggle" onclick="toggleQuestionGrid()">
            <span>View All Questions</span>
            <span class="arrow">‚ñº</span>
        </div>

        <!-- Question Grid -->
        <div class="question-grid" id="question-grid">
            <!-- Grid will be inserted here -->
        </div>

        <!-- Submit Button -->
        <div class="submit-container">
            <button class="btn btn-success btn-large" onclick="confirmSubmit()">
                ‚úÖ Submit Test
            </button>
        </div>
    </div>

    <!-- Review Screen -->
    <div id="review-screen" class="screen">
        <div class="container">
            <h2>üìã Review Your Answers</h2>
            <div class="review-stats">
                <div class="stat-box answered">
                    <span class="stat-value" id="answered-count">0</span>
                    <span class="stat-label">Answered</span>
                </div>
                <div class="stat-box unanswered">
                    <span class="stat-value" id="unanswered-count">20</span>
                    <span class="stat-label">Unanswered</span>
                </div>
            </div>

            <div class="review-grid" id="review-grid">
                <!-- Review items will be inserted here -->
            </div>

            <div class="button-group">
                <button class="btn btn-secondary" onclick="backToTest()">
                    ‚Üê Back to Test
                </button>
                <button class="btn btn-success" onclick="confirmSubmit()">
                    ‚úÖ Submit Now
                </button>
            </div>
        </div>
    </div>

    <!-- Result Screen -->
    <div id="result-screen" class="screen">
        <div class="container">
            <div class="result-card">
                <div class="result-emoji" id="result-emoji">üèÜ</div>
                <h1 id="result-title">Excellent Performance!</h1>
                
                <div class="score-display">
                    <div class="score-circle">
                        <span class="score-value" id="final-score">0</span>
                        <span class="score-total">/ <span id="final-total">80</span></span>
                    </div>
                    <div class="percentage" id="percentage">0%</div>
                </div>

                <div class="result-stats">
                    <div class="result-stat correct">
                        <span class="stat-icon">‚úÖ</span>
                        <span class="stat-label">Correct</span>
                        <span class="stat-value" id="correct-count">0</span>
                    </div>
                    <div class="result-stat wrong">
                        <span class="stat-icon">‚ùå</span>
                        <span class="stat-label">Wrong</span>
                        <span class="stat-value" id="wrong-count">0</span>
                    </div>
                    <div class="result-stat skipped">
                        <span class="stat-icon">‚è≠Ô∏è</span>
                        <span class="stat-label">Skipped</span>
                        <span class="stat-value" id="skipped-count">0</span>
                    </div>
                </div>

                <div class="time-taken">
                    <span class="icon">‚è±Ô∏è</span>
                    Time Taken: <strong id="time-taken">0m 0s</strong>
                </div>

                <div class="result-message" id="result-message">
                    Keep up the great work!
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" onclick="viewExplanations()">
                        üìñ View Explanations
                    </button>
                    <button class="btn btn-secondary" onclick="closeApp()">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirm-modal" class="modal">
        <div class="modal-content">
            <h3>‚ö†Ô∏è Submit Test?</h3>
            <p id="confirm-message">You have answered 15/20 questions.</p>
            <p>Once submitted, you cannot change your answers.</p>
            <div class="button-group">
                <button class="btn btn-secondary" onclick="closeModal()">
                    Cancel
                </button>
                <button class="btn btn-success" onclick="submitTest()">
                    Yes, Submit
                </button>
            </div>
        </div>
    </div>

    <script src="test_data.js"></script>
    <script src="app.js"></script>
    </div>
</body>
</html>
